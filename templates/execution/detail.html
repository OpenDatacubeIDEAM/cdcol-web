{% extends 'base.html' %}

{% block content %}
    <!-- breadcrumb start -->
    <!-- ================ -->
    <div class="breadcrumb-container">
        <div class="container">
            <ol class="breadcrumb">
                <li><i class="fa fa-home pr-10"></i><a href="/">Inicio</a></li>
                <li><a href="{% url 'execution:index' %}">Ejecuciones</a></li>
                <li class="active">Detalle</li>
            </ol>
        </div>
    </div>
    <!-- breadcrumb end -->

    <!-- main-container start -->
    <!-- ================ -->
    <section class="main-container">

        <div class="container">
            <div class="row">

                <!-- main start -->
                <!-- ================ -->
                <div class="main col-md-8">

                    <!-- page-title start -->
                    <!-- ================ -->
                    <h3 class="page-title">Información de la ejecución</h3>
                    <div class="separator-2"></div>
                    <!-- page-title end -->
                    <p>Esta es la información de la ejecución seleccionada.</p>
                    <table class="table">
                        <tbody>
                        <tr>
                            <td>Código de la ejecución:</td>
                            <td>{{ execution.id }}</td>
                        </tr>
                        <tr>
                            <td>Algoritmo:</td>
                            <td>{{ execution.version.algorithm.name }}</td>
                        </tr>
                        <tr>
                            <td>Estado:</td>
                            <td>{{ execution.get_state_display }}</td>
                        </tr>
                        <tr>
                            <td>Fecha de Creación:</td>
                            <td>{{ execution.created_at }}</td>
                        </tr>
                        <tr>
                            <td>Inicio ejecución:</td>
                            <td>{{ execution.started_at }}</td>
                        </tr>
                        <tr>
                            <td>Fin ejecución:</td>
                            <td>{{ execution.finished_at }}</td>
                        </tr>
                        <tr>
                            <td>Creada por:</td>
                            <td>{{ execution.executed_by.email }}</td>
                        </tr>
                        </tbody>
                    </table>

                    <h3 class="page-title">Parámetros de la ejecución</h3>
                    <div class="separator-2"></div>
                    <!-- page-title end -->
                    <p>Los parámetros de la ejecución son los siguientes:</p>
                    <table class="table">
                        <tbody>
                        {% for param in executed_params %}
                            <tr>
                                <td>{{ param.parameter.name }}</td>
                                <td>{{ param.obtain_value }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>

                    <h3 class="page-title">Resultados generados</h3>
                    <div class="separator-2"></div>
                    <p>A continuación se encuentran los archivos generados por esta ejecución:</p>

                    <div class="row">
                        <div class="col-md-12">
                            <div class="table-responsive">
                                <table class="table table-striped table-colored">
                                    <thead>
                                    <tr>
                                        <th>Nombre</th>
                                        <th>Fecha de creación</th>
                                        <th>Acciones</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    {% for file in files %}
                                        <tr>
                                            <td>{{ file }}</td>
                                            <td>22 de Junio 2016 10:00 AM</td>
                                            <td><a href="" class="btn btn-gray btn-sm"><i class="fa fa-bars"></i> Descargar</a>
                                                <a href="" class="btn btn-gray btn-sm"><i class="fa fa-bars"></i> Ver
                                                    Detalle</a>
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>


                    <h3 class="page-title">Traza de errores</h3>
                    <div class="separator-2"></div>
                    <p>La traza del error de la ejecución es la siguiente::</p>

                    <pre><code style="color: #c7254e;">{{ execution.trace_error }}</code></pre>
                </div>
                <!-- main end -->

                <!-- sidebar start -->
                <!-- ================ -->
                <aside class="col-md-4 col-lg-3 col-lg-offset-1">
                    <div class="sidebar">
                        <div class=" clearfix">
                            <h3 class="title">Acciones</h3>
                            <div class="separator-2"></div>
                            {% if review %}
                                <nav>
                                    <a href="#" class="btn btn-gray btn-md btn-block">No hay acciones disponibles</a>
                                </nav>
                            {% else %}
                                <nav>
                                    <a href="{% url 'execution:rate_execution' execution.id %}" class="btn btn-primary btn-md btn-block">Calificar Resultados de la
                                        Ejecución</a>
                                </nav>
                            {% endif %}

                        </div>
                        {% if review %}
                            <div class="block clearfix">
                                <h3 class="title">Calificación realizada</h3>
                                <div class="separator-2"></div>
                                <p>La calificación que realizaste de los resultados de esta ejecución es la
                                    siguiente:</p>
                                <nav>
                                    <ul>
                                        <li>Calificación: {{ review.rating }}</li>
                                        <li>Comentario: {{ review.comments }}</li>
                                    </ul>
                                </nav>
                            </div>
                        {% endif %}
                    </div>
                </aside>
                <!-- sidebar end -->

            </div>
        </div>
    </section>
    <!-- main-container end -->
{% endblock %}